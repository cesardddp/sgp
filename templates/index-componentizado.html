{% extends 'layout.html' %}
{% block link_rel %}
    <link href="{{ url_for('static', filename='css/floatin-label.css') }}" rel="stylesheet">
{% endblock link_rel %}
{% block body %}

<body class="container mx-auto px-6">
    <div class="cloud x2"></div>
    <div id="app">
        <form class="flex flex-col justify-items-center space-y-3" @submit.prevent>

            <cliente-item
            :pnome = "cliente.nome"
            :pendereco = "cliente.endereco"
            :ptelefone = "cliente.telefone"
            :pnumero = "cliente.numero"
            :pdata = "cliente.data"
            :phora = "cliente.hora"       
            ></cliente-item> 

            <div v-for="amb in ambientes" class="relative z-0 w-5/6" :key="amb.id">
                <input type="tel" name="amb.nome" placeholder=" "
                    class="pt-3 pb-2 block w-full px-0 mt-0 bg-transparent border-0 border-b-2 appearance-none focus:outline-none focus:ring-0 focus:border-black border-gray-200">
                <label class="absolute duration-300 top-3 -z-1 origin-0 text-gray-500"
                    for="ambiente-1">{{'{{'}}amb.label{{'}}'}}</label>
            </div>
            <button class="self-end bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded-full"
                @click="add_amb">+ambs</button>

            </form>
    </div>



<!-- TEMPLATE -->
<script type="text/x-template" id="cliente_template">
    <div class="relative z-0 w-full mb-5">
        <input type="text" name="nome" placeholder=" " v-model="nome"
            class="pt-3 pb-2 block w-full px-0 mt-0 bg-transparent border-0 border-b-2 appearance-none focus:outline-none focus:ring-0 focus:border-black border-gray-200">
        <label class="absolute duration-300 top-3 -z-1 origin-0 text-gray-500" for="nome">Nome</label>
        <!-- <span class="text-sm text-red-600 hidden" id="error">Name is required</span> -->
    </div>

    <div class="flex justify-center">
        <div class="relative z-0 w-5/6 mb-5">
            <input type="text" name="endereco" placeholder=" " v-model="endereco"
                class="pt-3 pb-2 block w-full px-0 mt-0 bg-transparent border-0 border-b-2 appearance-none focus:outline-none focus:ring-0 focus:border-black border-gray-200">
            <label for="endereco"
                class="absolute duration-300 top-3 -z-1 origin-0 text-gray-500">Endereco</label>
        </div>
        <div class="relative z-0 w-1/6 mb-5">
            <input type="number" name="numero" v-model="telefone"
                class="pt-3 pb-2 block w-full px-0 mt-0 bg-transparent border-0 border-b-2 appearance-none focus:outline-none focus:ring-0 focus:border-black border-gray-200">
            <label for="numero" class="absolute duration-300 top-3 -z-1 origin-0 text-gray-500">NÂº</label>
        </div>
    </div>

    <div class="flex justify-center">
        <div class="relative z-0 w-full">
            <input type="tel" name="telefone" placeholder=" " v-model="numero"
                class="pt-3 pb-2 block w-full px-0 mt-0 bg-transparent border-0 border-b-2 appearance-none focus:outline-none focus:ring-0 focus:border-black border-gray-200">
            <label class="absolute duration-300 top-3 -z-1 origin-0 text-gray-500"
                for="telefone">Telefone</label>
        </div>
    </div>


    <div class="flex justify-center">
        <div class="relative z-0 w-full">
            <input type="date" name="data" v-model="data"
                class="pt-3 pb-2 block w-full px-0 mt-0 bg-transparent border-0 border-b-2 appearance-none focus:outline-none focus:ring-0 focus:border-black border-gray-200">
            <!-- <label for="data">Data</label> -->
        </div>
        <div class="relative z-0 w-full">
            <input type="time" name="hora" v-model="hora"
                class="pt-3 pb-2 block  px-0 mt-0 bg-transparent border-0 border-b-2 appearance-none focus:outline-none focus:ring-0 focus:border-black border-gray-200">
            <!-- <label for="hora">hora</label> -->
        </div>
    </div>
</script>


    
    <script type="application/javascript">
    
        const App = {
            data() {
                return {
                    ultimo: 1,
                    ambientes: [
                        { nome: "ambiente-1", id: 1, label: "Ambiente 1" }
                    ],
                    cliente:{
                        nome:"tetes",
                        endereco:"af",
                        telefone:" aa",
                        numero:"131",
                        data:"arf",
                        hora:"a sad"
                    }
                }
            },
            methods: {
                add_amb() {
                    this.ultimo = this.ultimo + 1
                    console.log(this.ultimo, this.ambientes)
                    this.ambientes.push(
                        { nome: `ambiente-${this.ultimo}`, id: this.ultimo, label: 'Ambiente ' + this.ultimo }
                    )
                }
            },
            
        }
        var app = Vue.createApp(App)
        app.component("cliente-item",{
            props:["pnome","pendereco","ptelefone","pnumero","pdata","phora"],
            template:"#cliente_template",
            data() {
                return 
                    {
                        nome:this.pnome
                        endereco:this.pendereco
                        telefone:this.ptelefone
                        numero:this.pnumero
                        data:this.pdata
                        hora:this.phora
                    }
                
            },
            
            watch:{
                cliente(){
                    console.log(this.cliente)
                },
                nome(){
                    console.log(this.nome)
                },
                endereco(){
                    console.log(this.endereco)
                },
                telefone(){
                    console.log(this.telefone)
                },
                numero(){
                    console.log(this.numero)
                },
                data(){
                    console.log(this.data)
                },
                hora(){
                    console.log(this.hora)
                }
            },

        })
        app.mount("#app")
    </script>

    
</body>

{% endblock body %}